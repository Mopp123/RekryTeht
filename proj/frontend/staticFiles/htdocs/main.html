
<!DOCTYPE html>
<html>
<head>
    	<title>Main</title>
    	<link rel="stylesheet" href="../style_common.css" />
	<script src="../global.js"></script>
    	<script defer src="../mainCommon.js"></script>
	<script defer src="../files.js"></script>


</head>
<body>

    <div class="mainContent">
        <h1 id="id_title">Welcome</h1>

        <button onclick="sendReq_logout()">Logout</button>


        <br>
        <p id="id_debugInfo"></p>
        <br>

        <form id="id_uploadForm">
            <label for="id_inputFile">Choose file to upload</label><br>
            <input id="id_inputFile" type="file" /><br><br>

            <button>Upload</button>
        </form>
    </div>

    <br><br><br>

    <div class="mainContent" id="id_fileBrowser">
        
        <form id="id_searchFile">

            <button>Refresh</button>
        </form>

        <h2>Uploaded files:</h2>
        <ul id="id_fileListing">
	</ul>
    </div>


    <script>

        
        console.log("Login appeared to be successful...");

        document.getElementById("id_title").innerHTML = "Welcome " + getCookie("username") + "!";
        
	// Submit upload
        document.getElementById("id_uploadForm").onsubmit = function(event) {
            event.preventDefault();    

            let fileData = document.getElementById("id_inputFile").files[0];

            if(fileData) {
                sendReq_uploadFile(fileData);
            }
        }
	
	
	// Submit search	
        document.getElementById("id_searchFile").onsubmit = function(event) {
            	event.preventDefault();    

		sendReq_getFileListing();
        }
	

</script>

</body>
</html>
